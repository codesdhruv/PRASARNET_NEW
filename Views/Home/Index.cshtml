@using System.Data
@model List<PRASARNET.Areas.PrasarNet.Models.Circular>

@{
    ViewData["Title"] = "Prasarnet Home";
    Layout = "_Layout";
}

@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService

<style type="text/css">
    .left-circular-col {
        height: 80vh; /* or any value like 60vh, 600px, etc. */
    }

    .scrollable-card-body {
        overflow-y: auto;
        max-height: calc(100%); /* subtract header/footer height as needed */
    }
    .announcement-card {
        border-radius: 0px !important;
    }

    .fixed-col {
        text-overflow: ellipsis;
        white-space: normal;
        word-wrap: break-word;
    }

    #circularDataTable td {
        text-wrap: auto !important;
        padding: 5px !important;
        font-size: 12px;
    }
    ::-webkit-scrollbar {
  width: 5px;
}
::-webkit-scrollbar-thumb {
  background: #4b49ac;
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: #4b49ac;
}

/* Track */
::-webkit-scrollbar-track {
  background: #f1f1f1;
}
</style>

<div class="content-wrapper pt-2">

    <div class="row">
        <div class="col-12 px-lg-0">
            <div class="bg-white">
                <div class="pt-1">
                    <marquee behavior="scroll" direction="left" scrollamount="8" loop="infinite" onmouseover="this.stop();" onmouseout="this.start();">
                        <i class="">“To succeed in your mission, you must have single-minded devotion to your goal.”</i>
                        <cite class="text-primary font-weight-bolder"> – Dr.A.P.J.Abdul Kalam</cite> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                        <i class="pt-1">“We are what our thoughts have made us; so take care about what you think. Words are secondary. Thoughts live; they travel far.”</i>
                        <cite class="text-primary font-weight-bolder"> – Swami Vivekananda</cite>
                    </marquee>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-2">

        <div class="col-lg-6 col-12 stretch-card px-lg-0">
            <div class="card announcement-card shadow-sm">
                <div class="card-header bg-primary  d-flex align-items-center justify-content-between" style="background: #ffcd57a8;border-radius: 10px 10px 0px 0px;">
                    <div class="d-flex align-items-center text-white">
                        <i class="mdi mdi-newspaper icon-md text-white mr-4"></i>
                        <span class="h4 mt-1 font-weight-600">What's New</span>
                    </div>
                    <a href="@Url.Action("AllCircular", "Dashboard", new{Area = "PrasarNet"} )" class="btn btn-xs  btn-success float-end">View More</a>
                </div>
                <div class="card-body scrollable-card-body pt-0 pr-1 pl-2" style="height:150px">
                    <div class="table-responsive">
                        @if (Model != null && Model.Count > 0)
                        {
                            int serial = 1;
                            foreach (var item in Model)
                            {
                                <div class="border-bottom">
                                    <p>
                                        <span style="color:blue; font-weight:600; font-size:13px;">
                                            <a href="@Url.Action("DownloadDocument", "Dashboard", new { docId = item.Docid })" style="text-decoration:none;" target="_blank">
                                                @item.Doc_Title
                                            </a>
                                        </span>

                                        @if (item.Createdon >= DateTime.Now.AddDays(-1007))
                                        {
                                            <span class="shimmer">NEW</span>
                                        }
                                        else
                                        {
                                            <span>&nbsp;</span>
                                        }
                                        <br />
                                        <span style="color: darkred; font-weight: 600; font-size: 12px;">Uploaded By : </span><span style="font-weight: 500; font-size: 12px;"> @item.UploaderName </span>&nbsp;
                                        <span style="color: darkred; font-weight: 600; font-size: 12px;">Uploaded On : </span><span style="font-weight: 500; font-size: 12px;"> @item.Createdon.ToString("dd MMM yyyy") </span> &nbsp;
                                        <span style="color:darkred; font-weight:600; font-size:12px;">Category : </span><span style="font-weight: 500; font-size: 12px;"> @item.Doc_Type </span>
                                    </p>
                                </div>
                                serial++;
                            }
                        }
                        else
                        {
                            <div class=" mt-2 mb-2 border-bottom">
                                <p>
                                    <span class="text-center">No circulars found.</span>
                                </p>
                            </div>
                        }

                    </div>
                </div>
            </div>
        </div>

        <div class=" col-lg-6 col-12  pt-3 pt-lg-0 pr-lg-0">
            <div class="col-12 stretch-card px-0 mb-3">
                <div class="card announcement-card shadow-sm">
                   
                    <div class="card-header  d-flex align-items-center bg-primary justify-content-start" style="background: #ff40bd63;border-radius: 10px 10px 0px 0px;">
                        <i class="mdi mdi-volume-medium icon-md text-white mr-4"></i>
                        <span class="h4 mt-1 text-white font-weight-600">Employee Corner</span>
                    </div>
                    <div class="card-body scrollable-card-body pt-0 pr-1 pl-2" style="height:200px">
                        <div class="table-responsive">
                            @if (ViewBag.employeecorner != null && ViewBag.employeecorner.Count > 0)
                            {
                                int serial = 1;
                                foreach (var item in ViewBag.employeecorner)
                                {
                                    <div class="border-bottom">
                                        <p>
                                            <span style="color:blue; font-weight:600; font-size:13px;">
                                                <a href="@Url.Action("DownloadDocument", "Dashboard", new { docId = @item.Docid })" style="text-decoration:none;" target="_blank">@item.Doc_Title</a>
                                            </span>
                                            @if (item.Createdon >= DateTime.Now.AddDays(-7))
                                            {
                                                <span class="shimmer">NEW</span>
                                            }
                                            else
                                            {
                                                <span>&nbsp;</span>
                                            }
                                            <br />
                                            <span style="color: darkred; font-weight: 600; font-size: 12px;">Uploaded By : </span><span style="font-weight: 500; font-size: 12px;"> @item.UploaderName </span>&nbsp;
                                            <span style="color: darkred; font-weight: 600; font-size: 12px;">Uploaded On : </span><span style="font-weight: 500; font-size: 12px;"> @item.Createdon.ToString("dd MMM yyyy") </span> &nbsp;
                                            <span style="color:darkred; font-weight:600; font-size:12px;">Category : </span><span style="font-weight: 500; font-size: 12px;"> @item.Doc_Type </span>
                                        </p>
                                    </div>
                                    serial++;
                                }
                            }
                            else
                            {
                                <div class=" mt-2 mb-2">
                                    <p>
                                        <span class="text-center">No circulars found.</span>
                                    </p>
                                </div>
                            }

                        </div>
                    </div>
                </div>
            </div>


            <div class="col-12 stretch-card px-0">
                <div class="card announcement-card shadow-sm">
                    <div class="card-header text-white bg-primary d-flex align-items-center justify-content-start" style="background: #ffcd57;border-radius: 10px 10px 0px 0px;">
                        <i class="mdi mdi-album icon-md text-white mr-4"></i>
                        <span class="h4 mt-1 text-white">Photo Gallery</span>
                    </div>
                    <div class="card-body scrollable-card-body pt-1" style="height:200px">
                        <div class="row">
                            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                                <ol class="carousel-indicators">
                                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                                </ol>
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img class="d-block w-100" src="https://prasarbharati.gov.in/wp-content/uploads/2024/04/G-02.jpg" alt="First slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="https://prasarbharati.gov.in/wp-content/uploads/2024/04/G-02.jpg" alt="Second slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="https://prasarbharati.gov.in/wp-content/uploads/2024/04/G-02.jpg" alt="Third slide">
                                    </div>
                                </div>
                                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <div class="row">
        <div class="col-md-12 pt-4 transparent">
            <div class="row">
                <div class="col-md-4 mb-2 stretch-card">
                    <div class="card" style="background:#ffcd5736">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-9">
                                    <h4 class="card-title">Today's Birthday </h4>
                                </div>
                                <div class="col-md-3">
                                    <a class="btn btn-sm btn-warning float-end">View</a>
                                </div>
                            </div>
                            <div class="media">
                                <i class="mdi mdi-cake icon-md text-warning d-flex align-self-start mr-3"></i>
                                <marquee scrollamount="5" onMouseOver="this.stop()" onMouseOut="this.start()">
                                    <div class="media-body d-flex">
                                        @if (ViewBag.Birthdays != null && ViewBag.Birthdays.Tables.Count > 0 && ViewBag.Birthdays.Tables[0].Rows.Count > 0)
                                        {
                                            foreach (DataRow row in ViewBag.Birthdays.Tables[0].Rows)
                                            {
                                                <p class="card-text pe-2 me-2 border-end border-secondary">
                                                    <strong>@row["fullname"]</strong><br />
                                                    Dept: @row["stationdetails"]<br />
                                                    DOB: @Convert.ToDateTime(row["DateOfBirthChrist"]).ToString("dd MMM yyyy")
                                                </p>
                                                <hr />
                                            }
                                        }
                                        else
                                        {
                                            <p class="card-text">No birthdays today.</p>
                                        }
                                        @* <p class="card-text">Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque.</p> *@
                                    </div>
                                </marquee>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-2 stretch-card">
            <div class="card" style="background:#5771ff36">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-9">
                            <h4 class="card-title">Retiring this Month</h4>
                        </div>
                        <div class="col-md-3">
                            <a class="btn btn-sm btn-info float-end">View</a>
                        </div>
                    </div>
                    <div class="media">
                        <i class="mdi mdi-cake icon-md text-info d-flex align-self-start mr-3"></i>
                        <marquee scrollamount="5" onMouseOver="this.stop()" onMouseOut="this.start()">
                        <div class="media-body d-flex">
                            
                            @if (ViewBag.Retirements != null && ViewBag.Retirements.Tables.Count > 0 && ViewBag.Retirements.Tables[0].Rows.Count > 0)
                            {
                                foreach (DataRow row in ViewBag.Retirements.Tables[0].Rows)
                                {
                                    
                                    <p class="card-text pe-2 me-2 border-end border-secondary">
                                        <strong>@row["fullname"]</strong><br />
                                        Dept: @row["stationdetails"]<br />
                                        DOB: @Convert.ToDateTime(row["DateOfBirthChrist"]).ToString("dd MMM yyyy")
                                    </p>
                                    <hr />
                                    
                                }
                            }
                            
                            else
                            {
                                <p class="card-text">No Retirements today.</p>
                            }
                            @* <p class="card-text">Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque.</p> *@
                        </div>
                        </marquee>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-2 stretch-card">
            <div class="card" style="background:#ff40bd36">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-9">
                            <h4 class="card-title">PB Calender</h4>
                        </div>
                    </div>
                    <div class="media">
                        <i class="mdi mdi-calendar-account  icon-md text-info d-flex align-self-end mr-3"></i>
                        <div class="media-body" style="text-align: center;">
                            <p class="card-text">
                                <a href="/PRASARNET/Dashboard/DownloadCalendar" class="btn btn-outline-primary" style="text-align:center">
                                    Download Calender
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 stretch-card px-lg-0">
            <div class="card position-relative shadow">
                <div class="card-body">
                    <div class="row ">
                        <div class="col-12 col-md-4  d-flex border-right-lg flex-column justify-content-center align-items-center">
                            <img src="/images/PB_ceo.jpeg" alt="img" class="img-fluid rounded-circle profile-img">
                            <div class="mt-3 text-center">
                                <p class="font-weight-500 mb-1 text-primary">Chief Executive Officer</p>
                                <h5 class="mb-2">Shri Gaurav Dwivedi</h5>
                            </div>
                        </div>
                        <div class="col-12 col-md-4 d-flex border-right-lg flex-column justify-content-center align-items-center">
                            <img src="/images/profile.jpg" alt="img" class="img-fluid rounded-circle profile-img">
                            <div class="mt-3 text-center">
                                <p class="font-weight-500 mb-1 text-primary">DG:AIR</p>
                                <h5 class="mb-2 ">Dr. Vashudha Gupta</h5>
                            </div>
                        </div>
                        <div class="col-12 col-md-4 d-flex flex-column justify-content-center align-items-center">
                            <img src="/images/profile.jpg" alt="img" class="img-fluid rounded-circle profile-img">
                            <div class="mt-3 text-center">
                                <p class="font-weight-500 mb-1 text-primary">DG:DD</p>
                                <h5 class="mb-2">Ms.Priya Kumar</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    @*<div class="row">
        <div class="col-12 pt-4 stretch-card">
            <div class="card shadow-sm bg-gradient-primary">
                <div class="card-body">
                    <marquee behavior="scroll" direction="left" scrollamount="8" loop="infinite" onmouseover="this.stop();" onmouseout="this.start();">
                        <i class="text-white">“To succeed in your mission, you must have single-minded devotion to your goal.”</i>
                        <cite class="text-light font-weight-bolder"> – Dr.A.P.J.Abdul Kalam</cite> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                        <i class="text-white">“We are what our thoughts have made us; so take care about what you think. Words are secondary. Thoughts live; they travel far.”</i>
                        <cite class="text-light font-weight-bolder"> – Swami Vivekananda</cite>
                    </marquee>
                </div>
            </div>
        </div>
    </div>*@

    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                    @*@if ((await AuthorizationService.AuthorizeAsync(User, "CanViewDashboard")).Succeeded)
                        {
                            <a href="/Dashboard">Dashboard</a>
                        }

                        @if (User.Identity.IsAuthenticated)
                        {
                            var permissionClaims = User.Claims.Where(c => c.Type == "permission").Select(c => c.Value).ToList();

                            <div>
                                <h5>Permissions :</h5>
                                @if (permissionClaims.Any())
                                {
                                    <ul>
                                        @foreach (var perm in permissionClaims)
                                        {
                                            <li>@perm</li>
                                        }
                                    </ul>
                                }
                                else
                                {
                                    <span>No permissions assigned. Please contact the admin.</span>
                                }
                            </div>
                        }*@


                </div>
            </div>
        </div>
    </div>

</div>
