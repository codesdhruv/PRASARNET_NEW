@model List<PRASARNET.Areas.MasterMng.Models.Permission>

@{
    var rand = new Random(); // For unique IDs
}

@if (Model != null && Model.Any())
{
    <ul class="list-group">
        @foreach (var node in Model)
        {
            var collapseId = "collapse_" + node.PermissionId + "_" + rand.Next(1000);
            <li class="list-group-item @(node.Children != null && node.Children.Any() ? "bg-light text-primary h4" : "")">
                @if (node.Children != null && node.Children.Any())
                {
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center">
                            <button class="btn btn-sm btn-outline-secondary mr-2"
                                    type="button"
                                    data-toggle="collapse"
                                    data-target="#@collapseId"
                                    aria-expanded="false"
                                    aria-controls="@collapseId">
                                [+]
                            </button>
                            <strong>@node.PermissionName</strong>
                        </div>
                    </div>

                    <div class="collapse mt-2 ml-4" id="@collapseId">
                        @Html.Partial("_PermissionTree", node.Children)
                    </div>
                }
                else
                {
                    <div class="form-check ml-4">
                        <input class="form-check-input" type="checkbox" name="permissions"
                               value="@node.PermissionId" id="perm_@node.PermissionId" />
                        <label class="form-check-label" for="perm_@node.PermissionId">
                            @node.PermissionName
                        </label>
                    </div>
                }
            </li>
        }
    </ul>
}
